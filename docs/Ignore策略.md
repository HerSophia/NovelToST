# Ignore 策略（v2）

> 目标：明确“哪些文件该入库，哪些应忽略”，减少协作噪音与敏感信息泄漏风险。

## 1. 当前规则盘点

### 1.1 `.gitignore`

当前已忽略：

- `node_modules`
- 常见日志文件
- `auto-imports.d.ts`
- `components.d.ts`

### 1.2 `.prettierignore`

- 忽略 `dist`

### 1.3 `.gitattributes`

- `dist/** merge=ours`
  - 作用：降低 `dist` 冲突成本，交由 CI 重打包覆盖。

## 2. 总体原则

1. **可再生文件优先忽略**，但需评估是否影响团队开发体验。
2. **机器/个人环境文件不入库**。
3. **安全优先**：任何可能暴露地址、token、私有配置的文件不得入库。
4. **变更最小化**：无明确收益不新增 ignore 规则，避免误伤必要文件。

## 3. 本地私有配置建议

对于“只在自己机器生效”的改动，优先使用：

- `git update-index --skip-worktree <file>`
- 或 `.git/info/exclude`（仅本地生效，不影响团队）

示例（仓库 README 已给出）：

```bash
git update-index --skip-worktree .vscode/launch.json
```

## 4. 新增 ignore 规则的准入标准

提议新增某条规则前，请在 PR 描述里回答：

1. 该文件是否可由命令自动再生？
2. 该文件是否包含个人/敏感信息？
3. 忽略后是否会影响他人开发（如缺类型、缺配置）？
4. 是否有替代方案（例如改为本地 exclude）？

## 5. 针对本仓库的建议

- 先保持当前 `.gitignore` 最小化，不做大范围扩展。
- 若后续出现新的生成产物（例如额外 d.ts、缓存目录）造成频繁噪音，再按“准入标准”逐条引入。
- 每次调整 ignore 规则时，同步更新本文档并标注日期。

## 6. 变更记录

- 2026-02-24：建立初版文档。
- 2026-02-24：升级为 v2，移除模板同步相关策略描述，聚焦当前仓库的最小规则集。
